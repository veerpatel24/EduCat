"use strict";const e=require("electron"),t=require("node:path"),f=require("node:url");var n=typeof document<"u"?document.currentScript:null;const c=t.dirname(f.fileURLToPath(typeof document>"u"?require("url").pathToFileURL(__filename).href:n&&n.tagName.toUpperCase()==="SCRIPT"&&n.src||new URL("main.js",document.baseURI).href)),s=t.join(c,"../dist"),a=e.app.isPackaged?s:t.join(s,"../public");process.env.DIST=s;process.env.VITE_PUBLIC=a;let o;const i=process.env.VITE_DEV_SERVER_URL;function r(){o=new e.BrowserWindow({icon:t.join(a,"electron-vite.svg"),webPreferences:{preload:t.join(c,"preload.js"),nodeIntegration:!1,contextIsolation:!0,webSecurity:!0}}),o.webContents.on("did-finish-load",()=>{o?.webContents.send("main-process-message",new Date().toLocaleString())}),i?o.loadURL(i):o.loadFile(t.join(s,"index.html"))}e.app.on("window-all-closed",()=>{process.platform!=="darwin"&&e.app.quit()});e.app.on("activate",()=>{e.BrowserWindow.getAllWindows().length===0&&r()});e.app.on("web-contents-created",(m,p)=>{p.session.webRequest.onHeadersReceived((l,d)=>{d({responseHeaders:{...l.responseHeaders,"Content-Security-Policy":["default-src 'self' 'unsafe-inline' data:; script-src 'self' 'unsafe-eval' 'unsafe-inline' https://apis.google.com https://www.gstatic.com https://*.firebaseapp.com https://*.google.com; connect-src 'self' https://identitytoolkit.googleapis.com https://securetoken.googleapis.com https://firestore.googleapis.com https://www.googleapis.com https://*.firebaseio.com wss://*.firebaseio.com ws://localhost:* https://*.firebaseapp.com; img-src 'self' data: https://www.gstatic.com https://*.firebase.com https://*.googleusercontent.com https://*.google.com; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com; font-src 'self' https://fonts.gstatic.com; frame-src 'self' https://*.firebaseapp.com https://accounts.google.com https://*.google.com https://*.youtube.com;"]}})})});e.app.whenReady().then(r);
